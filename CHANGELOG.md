# Changelog

## 2.023
- 自动更新
- 修复保存任务时logger无法序列化的bug (感谢 @9chu)

## 2.022
- 增加下载速度显示
- 增加低速自动重试 `low_speed_threshold`, 默认为`10KB/s`以下重试
- 增加本地缓存WebUI, 并在打开RPC时自动开启浏览器，可通过`rpc_open_browser`关闭
- 支持制作大于2G的压缩包
- 修复同内容文件处理, 优化重试表的键
- 修复RPC读图和制作压缩包间的竞争问题
- 修复flt_quota_check的返回参数为3个
- 修复配额检查中的路径和大小匹配仅在和期望大小不同时触发
- 修复没有开启rpc_secret但发送了token时的RPC参数列表

## 2.021
- 支持 `multi page viewer`
- 不再支持Python 3.3
- 修复里站和表站CDN的IP
- 优化509错误判断
- 修复重命名时的编码问题
- 修复某些Python版本下跨磁盘移动时的问题

## 2.020
- 增加RPC帮助函数：`get_info`，`get_config`，`update_config`，`get_image`
- 增加通过RPC看图和下载压缩包功能
- 增加`delete_task_files`选项，设置是否删除任务时同时删除下载的文件
- 修复Windows文件夹不能以空格结尾以及文件不能以`.`结尾
- 修复下载时的临时文件在Windows下报错Error 32的问题

## 2.019
- 增加图片地址解析时的错误处理
- 增加使用流模式下载图片，优化判断丧尸线程
- 修复无法从环境变量中获得LOCALE时的问题
- 修复unichr被当成局部变量的问题
- 修复交互模式在Python3中的一个问题

## 2.018
- 增加`jpn_title`选项，选择是否使用日语标题
- 增加`download_range`选项，选择下载范围
- 增加`timeout`选项，设置下载图片的超时
- 增加`proxy_image_only`选项，设置仅使用代理下载图片
- 命令行增加`--force`选项，设置忽略配额继续下载; 配置增加`ignored_errors`选项，设置忽略的错误码
- 检查下载的图片是否完整
- 识别`socks5h`代理字符串

## 2.017
- 修复匹配网址的正则表达式
- 修复表站自动转换里站逻辑
- 修复下载图片重试后重命名失败的问题
- 修复原始文件名与自动编号冲突时重命名异常的问题

## 2.016
- 修复超出配额的判断
- 修复可能会下到评论中的图的问题
- 修复无法匹配安装在根目录glype的代理问题
- 某些错误现在会显示详细信息
- 增加`proxy_image`选项，选择是否使用代理下载图片

## 2.015
- 显示重命名时的错误
- 修复扩展名中多余的`.`
- 修复Windows下文件名的保留字符`<`, `>`

## 2.014
- 修复cookie中只有nw判断为已登录的bug
- 登录失败时显示网页上的错误信息
- 交互支持逗号分割多个任务，命令行模式支持同时添加多个任务
- 修复重命名的bug

## 2.013
- 修复页数>=1000页时抽风的bug
- 原始文件名冲突时自动+1

## 2.012
- 修复Windows下中文路径的问题

## 2.011
- 修复每页缩略图数量不是40时下载不完整的bug
- 90秒没有新下载图片则自动结束任务
- 本子包含重复图片时直接复制

## 2.010
- 图片404时重试

## 2.009
- 交互模式默认值改为配置中设置的值

## 2.008
- 跳过Content Warning

## 2.007
- 修复本子中有重复图时无法自动退出的bug
- 其他稳定性修复

## 2.006
- 增加`make_archive`, 下载完成后生成zip压缩包并删除下载目录
- 完善reload机制
- 检测IP是否被ban并自动更换代理IP

## 2.005
- 增加`rpc_secret`
- `i18n/zh_cn`更名为`i18n/zh_hans`

## 2.004
- 支持Python3

## 2.003
- 读取 .ehentai.cookie
- 交互模式不保存任务
- 添加 `--rename-ori` 参数和配置
- 如果用户配置有问题，从内置配置读取默认值
- 其他更新

## 2.002
- 支持`glype`代理类型

## 2.001
- 初始发布
